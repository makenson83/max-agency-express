<!DOCTYPE html>
<html lang="pt-BR">
<head><meta charset="UTF-8"><title>Recarga</title></head>
<body>
  <h1>Recarga DIGICEL / Natcom</h1>
  <select id="operadora">
    <option value="DIGICEL">DIGICEL</option>
    <option value="NATCOM">NATCOM</option>
  </select><br>
  <input id="numero" placeholder="NÃºmero do Haiti"><br>
  <input id="valor" type="number" placeholder="Valor em reais"><br>
  <button onclick="calcular()">ðŸ§® Calcular HTG</button>
  <button onclick="confirmar()">âœ… Confirmar Recarga</button>
  <p id="resultado"></p>
  <script>
    async function calcular() {
      const valor = parseFloat(document.getElementById('valor').value);
      try {
        const res = await fetch('/api/taxa');
        const data = await res.json();
        const htg = (valor * data.taxa).toFixed(2);
        document.getElementById('resultado').innerText = `Convertido: ${htg} HTG`;
      } catch (e) {
        alert("Erro ao buscar taxa online.");
      }
    }
    function confirmar() {
      alert("Recarga confirmada.");
    }
  </script>
</body>
</html>