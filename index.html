
<!DOCTYPE html>
<html>
<head>
  <title>Adicionar Saldo via Pix</title>
  <meta charset="UTF-8" />
</head>
<body>
  <h1>Adicionar Saldo via Pix</h1>
  <input type="number" id="valor" placeholder="Valor mínimo R$3 e máximo R$3000" />
  <button onclick="gerarPix()">Gerar Pix</button>
  <div id="resultado"></div>

  <script>
    async function gerarPix() {
      const valor = parseFloat(document.getElementById('valor').value);
      const res = await fetch('http://localhost:3000/criar-pagamento', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({ valor })
      });

      const dados = await res.json();
      if (dados.qr_code) {
        document.getElementById('resultado').innerHTML = `
          <p><b>Código Pix:</b> ${dados.qr_code}</p>
          <img src="data:image/png;base64,${dados.qr_code_base64}" width="200"/>
        `;
      } else {
        document.getElementById('resultado').innerText = 'Erro: ' + dados.erro;
      }
    }
  </script>
</body>
</html>
