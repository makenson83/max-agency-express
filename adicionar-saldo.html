
<button onclick="gerarPix()">Gerar Pix</button>
<div id="resultado"></div>

<script>
  async function gerarPix() {
    const valor = document.getElementById('valor').value;
    const res = await fetch('/api/servidor.js', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ valor })
    });
    const data = await res.json();
    const div = document.getElementById('resultado');
    if (data.point_of_interaction) {
      div.innerHTML = '<img src="' + data.point_of_interaction.transaction_data.qr_code_base64 + '" /><br><br>Copie e cole:<br>' + data.point_of_interaction.transaction_data.qr_code;
    } else {
      div.innerHTML = "<span style='color:red;'>Erro ao gerar Pix: " + (data.message || "Erro na requisição") + "</span>";
    }
  }
</script>
