
<script>
  async function gerarPix() {
    const valor = document.getElementById('valor').value;
    const res = await fetch('/api/servidor.js', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ valor })
    });

    const data = await res.json();
    const div = document.getElementById('resultado');

    if (data.point_of_interaction) {
      const pix = data.point_of_interaction.transaction_data;
      const imagemQR = pix.qr_code_base64
        ? '<img src="' + pix.qr_code_base64 + '" /><br><br>'
        : (pix.ticket_url ? '<img src="' + pix.ticket_url + '" width="300"/><br><br>' : '');

      div.innerHTML = imagemQR + "Copie e cole:<br><b>" + pix.qr_code + "</b>";
    } else {
      div.innerHTML = "<span style='color:red;'>Erro ao gerar Pix: " + (data.message || "Erro na requisição") + "</span>";
    }
  }
</script>
